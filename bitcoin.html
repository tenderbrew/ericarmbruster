<!-- File Guide: bitcoin.html. Skeuomorphic bitcoin dashboard with live price, 90D performance, news, reading queue, and recent blocks. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Head section: metadata, social tags, fonts, stylesheets, and analytics bootstrapping. -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bitcoin - Eric Armbruster</title>
  <meta name="description" content="A hand-crafted bitcoin room with live price data, performance timeline, recent blocks, and curated reading.">
  <meta name="theme-color" content="#0b0e1a">
  <link rel="canonical" href="https://www.ericarmbruster.com/bitcoin.html">
  <meta property="og:title" content="Bitcoin - Eric Armbruster">
  <meta property="og:description" content="A hand-crafted bitcoin room with live price data, performance timeline, recent blocks, and curated reading.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ericarmbruster.com/bitcoin.html">
  <meta property="og:image" content="https://www.ericarmbruster.com/images/hector-0001.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Bitcoin - Eric Armbruster">
  <meta name="twitter:description" content="A hand-crafted bitcoin room with live price data, performance timeline, recent blocks, and curated reading.">
  <meta name="twitter:image" content="https://www.ericarmbruster.com/images/hector-0001.png">
  <link rel="icon" href="images/hector-favicon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Display&family=Herr+Von+Muellerhoff&family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&family=IBM+Plex+Sans+Condensed:wght@400;500;700&family=IBM+Plex+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="bitcoin-styles.css">
  <!-- Analytics library: loaded async so it does not block rendering. -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5ZTHJXDR9V"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5ZTHJXDR9V');
  </script>
</head>
<body class="bitcoin-page">

  <!-- Scrolling ticker tape: live market data. -->
  <div class="ticker-tape" aria-hidden="true">
    <div class="ticker-track">
      <span class="tick" data-ticker="DJIA">DJIA 38,547 &#9650;0.42%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="SP500">S&amp;P 500 5,234 &#9650;0.18%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="NASDAQ">NASDAQ 16,340 &#9660;0.31%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="10Y">10Y YIELD 4.285%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="GOLD">GOLD 2,338.40</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="BTC">BTC 67,245 &#9650;2.14%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="VIX">VIX 13.42</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="EURUSD">EUR/USD 1.0845</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="CRUDE">WTI CRUDE 78.32</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="FEDFUNDS">FED FUNDS 5.33%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="DJIA">DJIA 38,547 &#9650;0.42%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="SP500">S&amp;P 500 5,234 &#9650;0.18%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="NASDAQ">NASDAQ 16,340 &#9660;0.31%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="10Y">10Y YIELD 4.285%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="GOLD">GOLD 2,338.40</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="BTC">BTC 67,245 &#9650;2.14%</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="VIX">VIX 13.42</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="EURUSD">EUR/USD 1.0845</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="CRUDE">WTI CRUDE 78.32</span>
      <span class="tick-sep">&bull;</span>
      <span class="tick" data-ticker="FEDFUNDS">FED FUNDS 5.33%</span>
      <span class="tick-sep">&bull;</span>
    </div>
  </div>

  <!-- Shared primary navigation. Drawer behavior is provided by drawer.js. -->
  <nav class="study-nav" aria-label="Primary">
    <div class="container nav-shell">
      <a href="index.html" class="brand-mark" aria-label="Eric Armbruster home">Eric M. Armbruster</a>

      <div class="nav-links-desktop" aria-label="Primary links">
        <a href="about.html">about</a>
        <a href="projects.html">projects</a>
        <button class="drawer-toggle" type="button" aria-expanded="false" aria-controls="site-drawer" data-drawer-toggle>interests</button>
      </div>

      <div class="nav-icons" aria-label="Contact links">
        <a href="mailto:eric.m.armbruster@gmail.com" aria-label="Email Eric"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"><rect x="1.5" y="3.5" width="13" height="9"/><path d="M1.5 3.5L8 9l6.5-5.5"/></svg></a>
        <a href="https://github.com/tenderbrew" target="_blank" rel="noopener" aria-label="Eric on GitHub"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a>
        <a href="https://www.linkedin.com/in/ericmarmbruster/" target="_blank" rel="noopener" aria-label="Eric on LinkedIn"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.016-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.52 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.174-.431.569-.878 1.232-.878.87 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a>
      </div>

      <button class="drawer-toggle nav-mobile-toggle" type="button" aria-expanded="false" aria-controls="site-drawer" data-drawer-toggle>menu</button>
    </div>

    <div class="site-drawer" id="site-drawer">
      <div class="container drawer-inner">
        <section class="drawer-group">
          <h2>Main Rooms</h2>
          <a href="about.html">About</a>
          <a href="projects.html">Projects</a>
        </section>
        <section class="drawer-group">
          <h2>Interests</h2>
          <a href="video-games.html">Video Games</a>
          <a href="film.html">Film</a>
          <a href="self-hosting.html">Self-Hosting</a>
          <a href="economics.html">Economics</a>
          <a href="bitcoin.html">Bitcoin</a>
          <a href="seymour.html">Seymour</a>
        </section>
        <section class="drawer-group drawer-group--compact">
          <h2>Elsewhere</h2>
          <a href="mailto:eric.m.armbruster@gmail.com">Email</a>
          <a href="https://github.com/tenderbrew" target="_blank" rel="noopener">GitHub</a>
          <a href="https://www.linkedin.com/in/ericmarmbruster/" target="_blank" rel="noopener">LinkedIn</a>
        </section>
      </div>
    </div>
  </nav>

  <!-- Asymmetrical control-board layout unique to the bitcoin room. -->
  <main class="btc-desk">
    <div class="container btc-desk-grid">
      <!-- Brass status rail + links. -->
      <header class="btc-rail" aria-labelledby="btc-page-title">
        <div class="btc-rail-inner">
          <p class="btc-rail-label"><span class="btc-prompt">&gt;</span> Bitcoin Terminal<span class="btc-cursor">_</span></p>
          <div class="btc-rail-links">
            <a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noopener">Whitepaper</a>
            <a href="https://mempool.space/" target="_blank" rel="noopener">Mempool</a>
            <a href="https://bitcoincore.org/en/download/" target="_blank" rel="noopener">Core</a>
          </div>
        </div>
      </header>
      <aside class="btc-panel btc-price-panel" aria-labelledby="btc-price-title">
        <div class="btc-panel-head">
          <h2 id="btc-price-title">Price</h2>
          <p id="btc-price-status" class="btc-status" role="status">Loading market data...</p>
        </div>
        <dl class="btc-price-grid">
          <div>
            <dt>Spot (USD)</dt>
            <dd id="btc-price-value">$--</dd>
          </div>
          <div>
            <dt>24H Move</dt>
            <dd id="btc-change-24h">--</dd>
          </div>
          <div>
            <dt>7D Move</dt>
            <dd id="btc-change-7d">--</dd>
          </div>
          <div>
            <dt>30D Move</dt>
            <dd id="btc-change-30d">--</dd>
          </div>
          <div class="btc-price-grid-wide">
            <dt>Last Sync</dt>
            <dd id="btc-last-sync">--</dd>
          </div>
        </dl>
      </aside>

      <article class="btc-panel btc-chart-panel" aria-labelledby="btc-chart-title">
        <div class="btc-panel-head">
          <h2 id="btc-chart-title">Performance</h2>
          <p class="btc-status">Last 90 days</p>
        </div>

        <div class="btc-chart-shell">
          <svg id="btc-chart-svg" class="btc-chart-svg" viewBox="0 0 720 280" role="img" aria-label="Bitcoin 90 day price chart">
            <defs>
              <linearGradient id="btc-area-grad" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="rgba(98, 37, 178, 0.45)"></stop>
                <stop offset="100%" stop-color="rgba(98, 37, 178, 0.03)"></stop>
              </linearGradient>
            </defs>
            <path id="btc-chart-area" fill="url(#btc-area-grad)" d=""></path>
            <path id="btc-chart-line" fill="none" stroke="#9339f4" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d=""></path>
          </svg>
        </div>

        <dl class="btc-chart-meta">
          <div>
            <dt>Start</dt>
            <dd id="btc-chart-start">$--</dd>
          </div>
          <div>
            <dt>End</dt>
            <dd id="btc-chart-end">$--</dd>
          </div>
          <div>
            <dt>High</dt>
            <dd id="btc-chart-high">$--</dd>
          </div>
          <div>
            <dt>Low</dt>
            <dd id="btc-chart-low">$--</dd>
          </div>
        </dl>
        <p class="btc-note">Source: <a href="https://www.binance.com/" target="_blank" rel="noopener">Binance</a></p>
      </article>

      <div class="btc-desk-bottom">
      <article class="btc-panel btc-news-panel" aria-labelledby="btc-news-title">
        <div class="btc-panel-head">
          <h2 id="btc-news-title">News</h2>
          <p id="btc-news-status" class="btc-status" role="status">Loading headlines...</p>
        </div>
        <ul id="btc-news-list" class="btc-news-list"></ul>
        <p class="btc-note">Source: <a href="https://www.coindesk.com/" target="_blank" rel="noopener">CoinDesk</a></p>
      </article>

      <article class="btc-panel btc-block-panel" aria-labelledby="btc-block-title">
        <div class="btc-panel-head">
          <h2 id="btc-block-title">Recent</h2>
          <p id="btc-block-status" class="btc-status" role="status">Loading latest blocks...</p>
        </div>
        <ul id="btc-block-list" class="btc-block-list"></ul>
        <a class="btc-button" href="https://mempool.space/blocks" target="_blank" rel="noopener">Open Block Explorer</a>
        <p class="btc-note">Source: <a href="https://mempool.space/api" target="_blank" rel="noopener">mempool.space API</a></p>
      </article>

      <article class="btc-panel btc-reading-panel" aria-labelledby="btc-reading-title">
        <h2 id="btc-reading-title">Recommended</h2>
        <div class="btc-reading-columns">
          <section>
            <h3>Educational</h3>
            <ul>
              <li><a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noopener">Bitcoin: A Peer-to-Peer Electronic Cash System</a></li>
              <li><a href="https://saifedean.com/thebitcoinstandard/" target="_blank" rel="noopener">The Bitcoin Standard &mdash; Saifedean Ammous</a></li>
              <li><a href="https://www.amazon.com/Layered-Money-Everything-Between-Central/dp/1736110527" target="_blank" rel="noopener">Layered Money &mdash; Nik Bhatia</a></li>
              <li><a href="https://www.amazon.com/Internet-Money-Andreas-M-Antonopoulos/dp/1537000454" target="_blank" rel="noopener">The Internet of Money &mdash; Andreas Antonopoulos</a></li>
              <li><a href="https://www.amazon.com/Broken-Money-Financial-System-Failing/dp/B0CG83FZTT" target="_blank" rel="noopener">Broken Money &mdash; Lyn Alden</a></li>
            </ul>
          </section>

          <section>
            <h3>Technical</h3>
            <ul>
              <li><a href="https://github.com/bitcoinbook/bitcoinbook" target="_blank" rel="noopener">Mastering Bitcoin &mdash; Andreas Antonopoulos</a></li>
              <li><a href="https://github.com/jimmysong/programmingbitcoin" target="_blank" rel="noopener">Programming Bitcoin &mdash; Jimmy Song</a></li>
              <li><a href="https://learnmeabitcoin.com/" target="_blank" rel="noopener">Learn Me A Bitcoin</a></li>
              <li><a href="https://www.amazon.com/Grokking-Bitcoin-Kalle-Rosenbaum/dp/1617294640" target="_blank" rel="noopener">Grokking Bitcoin &mdash; Kalle Rosenbaum</a></li>
              <li><a href="https://github.com/BlockchainCommons/Learning-Bitcoin-from-the-Command-Line" target="_blank" rel="noopener">Learning Bitcoin from the Command Line</a></li>
            </ul>
          </section>

          <section>
            <h3>Culture &amp; History</h3>
            <ul>
              <li><a href="https://www.amazon.com/Blocksize-War-controls-Bitcoins-protocol/dp/B08YQMC2WM" target="_blank" rel="noopener">The Blocksize War &mdash; Jonathan Bier</a></li>
              <li><a href="https://www.amazon.com/Digital-Gold-Bitcoin-Millionaires-Reinvent/dp/006236250X" target="_blank" rel="noopener">Digital Gold &mdash; Nathaniel Popper</a></li>
              <li><a href="https://www.amazon.com/Book-Satoshi-Collected-Writings-Nakamoto/dp/0996061312" target="_blank" rel="noopener">The Book of Satoshi &mdash; Phil Champagne</a></li>
              <li><a href="https://www.amazon.com/Genesis-Book-Story-Bitcoin-Before/dp/B0D2V3YC73" target="_blank" rel="noopener">The Genesis Book &mdash; Aaron van Wirdum</a></li>
              <li><a href="https://www.amazon.com/Bitcoin-Venice-Allen-Farrington/dp/B09KRFLX1Y" target="_blank" rel="noopener">Bitcoin is Venice &mdash; Allen Farrington</a></li>
            </ul>
          </section>
        </div>
      </article>
    </div>
    </div>
  </main>

  <!-- Shared footer. -->
  <footer>
    <div class="container">
      &copy; 2026 Eric Armbruster
    </div>
  </footer>

  <!-- Shared drawer controller for desktop/mobile navigation. -->
  <script src="drawer.js"></script>
  <script>
    // Bitcoin data pipeline: spot + simple market data, 90D history, recent news, and latest blocks.
    (function () {
      var priceStatus = document.getElementById('btc-price-status');
      var priceValue = document.getElementById('btc-price-value');
      var change24 = document.getElementById('btc-change-24h');
      var change7 = document.getElementById('btc-change-7d');
      var change30 = document.getElementById('btc-change-30d');
      var lastSync = document.getElementById('btc-last-sync');

      var chartStart = document.getElementById('btc-chart-start');
      var chartEnd = document.getElementById('btc-chart-end');
      var chartHigh = document.getElementById('btc-chart-high');
      var chartLow = document.getElementById('btc-chart-low');
      var chartLine = document.getElementById('btc-chart-line');
      var chartArea = document.getElementById('btc-chart-area');

      var blockStatus = document.getElementById('btc-block-status');
      var blockList = document.getElementById('btc-block-list');

      var newsStatus = document.getElementById('btc-news-status');
      var newsList = document.getElementById('btc-news-list');

      var endpoints = {
        ticker: 'https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT',
        klines: 'https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1d&limit=90',
        news: 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fwww.coindesk.com%2Farc%2Foutboundfeeds%2Frss%2F',
        blocks: 'https://mempool.space/api/blocks'
      };

      var fallbackNews = [
        {
          title: 'The Bitcoin Standard Reading Thread',
          url: 'https://bitcoin.org/bitcoin.pdf',
          source: 'Bitcoin.org',
          publishedOn: Date.now() / 1000
        },
        {
          title: 'Mastering Bitcoin Repository',
          url: 'https://github.com/bitcoinbook/bitcoinbook',
          source: 'GitHub',
          publishedOn: Date.now() / 1000
        }
      ];

      var fallbackBlocks = [
        { height: 937271, id: '00000000000000000000da583ef9da2814722dbbe54ae858ff5fdd706f928777', timestamp: 1771438210 },
        { height: 937270, id: '000000000000000000013f89dba10fd4bd5f15d0dd0f81df2d12ef16147f224f', timestamp: 1771437582 },
        { height: 937269, id: '0000000000000000000044ca9e5d0e9219e34ef3008221dc38a6dd9fbf5cefd3', timestamp: 1771436640 }
      ];

      function formatCurrency(value) {
        if (!Number.isFinite(value)) return '$--';
        return new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD',
          maximumFractionDigits: 0
        }).format(value);
      }

      function formatPercent(value) {
        if (!Number.isFinite(value)) return '--';
        var sign = value > 0 ? '+' : '';
        return sign + value.toFixed(2) + '%';
      }

      function formatDateTime(value) {
        var date = new Date(value);
        if (Number.isNaN(date.getTime())) return 'Unknown';
        return new Intl.DateTimeFormat('en-US', {
          month: 'short',
          day: 'numeric',
          year: 'numeric',
          hour: 'numeric',
          minute: '2-digit'
        }).format(date);
      }

      function formatRelativeSeconds(epochSeconds) {
        var diff = Math.max(0, Math.round(Date.now() / 1000 - epochSeconds));
        if (diff < 60) return diff + 's ago';
        if (diff < 3600) return Math.round(diff / 60) + 'm ago';
        if (diff < 86400) return Math.round(diff / 3600) + 'h ago';
        return Math.round(diff / 86400) + 'd ago';
      }

      function setSignedClass(node, value) {
        if (!node) return;
        node.classList.remove('is-up', 'is-down');
        if (!Number.isFinite(value)) return;
        if (value > 0) node.classList.add('is-up');
        if (value < 0) node.classList.add('is-down');
      }

      async function fetchJsonWithTimeout(url, timeoutMs) {
        if (typeof AbortController !== 'function') {
          var responseNoAbort = await fetch(url, { cache: 'no-store' });
          if (!responseNoAbort.ok) throw new Error('HTTP ' + responseNoAbort.status);
          return responseNoAbort.json();
        }

        var controller = new AbortController();
        var timer = setTimeout(function () { controller.abort(); }, timeoutMs || 8000);

        try {
          var response = await fetch(url, { cache: 'no-store', signal: controller.signal });
          if (!response.ok) throw new Error('HTTP ' + response.status);
          return response.json();
        } finally {
          clearTimeout(timer);
        }
      }

      function computeWindowChange(points, days) {
        if (!Array.isArray(points) || points.length < 2) return null;

        var end = points[points.length - 1].price;
        var startIndex = Math.max(0, points.length - 1 - days);
        var start = points[startIndex].price;
        if (!Number.isFinite(start) || start === 0 || !Number.isFinite(end)) return null;
        return ((end - start) / start) * 100;
      }

      function renderChart(points) {
        if (!Array.isArray(points) || points.length < 2) {
          chartLine.setAttribute('d', '');
          chartArea.setAttribute('d', '');
          chartStart.textContent = '$--';
          chartEnd.textContent = '$--';
          chartHigh.textContent = '$--';
          chartLow.textContent = '$--';
          return;
        }

        var width = 720;
        var height = 280;
        var padX = 28;
        var padY = 24;
        var plotWidth = width - (padX * 2);
        var plotHeight = height - (padY * 2);

        var prices = points.map(function (point) { return point.price; });
        var min = Math.min.apply(null, prices);
        var max = Math.max.apply(null, prices);
        if (max === min) max += 1;

        var coords = points.map(function (point, index) {
          var x = padX + ((plotWidth * index) / (points.length - 1));
          var y = padY + ((max - point.price) / (max - min)) * plotHeight;
          return [x, y];
        });

        var linePath = coords.map(function (coord, index) {
          return (index === 0 ? 'M ' : ' L ') + coord[0].toFixed(2) + ' ' + coord[1].toFixed(2);
        }).join('');

        var first = coords[0];
        var last = coords[coords.length - 1];
        var baseline = height - padY;
        var areaPath = linePath + ' L ' + last[0].toFixed(2) + ' ' + baseline.toFixed(2) +
          ' L ' + first[0].toFixed(2) + ' ' + baseline.toFixed(2) + ' Z';

        chartLine.setAttribute('d', linePath);
        chartArea.setAttribute('d', areaPath);

        chartStart.textContent = formatCurrency(points[0].price);
        chartEnd.textContent = formatCurrency(points[points.length - 1].price);
        chartHigh.textContent = formatCurrency(max);
        chartLow.textContent = formatCurrency(min);
      }

      function renderNews(items) {
        newsList.innerHTML = '';
        if (!items.length) {
          newsList.innerHTML = '<li class="btc-fallback">No bitcoin headlines available right now.</li>';
          return;
        }

        items.slice(0, 20).forEach(function (item) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          a.href = item.url || '#';
          a.target = '_blank';
          a.rel = 'noopener';
          a.textContent = item.title || 'Untitled headline';

          var meta = document.createElement('span');
          var source = item.source || 'News source';
          var published = Number(item.publishedOn || item.published_on || 0);
          if (published > 0) {
            meta.textContent = source + ' | ' + formatDateTime(published * 1000);
          } else {
            meta.textContent = source;
          }

          li.appendChild(a);
          li.appendChild(meta);
          newsList.appendChild(li);
        });
      }

      function renderBlocks(blocks) {
        blockList.innerHTML = '';
        if (!blocks.length) {
          blockList.innerHTML = '<li class="btc-fallback">No block data available.</li>';
          return;
        }

        blocks.slice(0, 10).forEach(function (block) {
          var li = document.createElement('li');

          var link = document.createElement('a');
          link.href = 'https://mempool.space/block/' + encodeURIComponent(block.id || '');
          link.target = '_blank';
          link.rel = 'noopener';
          link.textContent = 'Block #' + String(block.height || '--');

          var detail = document.createElement('span');
          var ts = Number(block.timestamp || 0);
          if (ts > 0) {
            detail.textContent = formatRelativeSeconds(ts) + ' | ' + formatDateTime(ts * 1000);
          } else {
            detail.textContent = 'Timestamp unavailable';
          }

          li.appendChild(link);
          li.appendChild(detail);
          blockList.appendChild(li);
        });
      }

      async function loadMarketData() {
        try {
          var responses = await Promise.all([
            fetchJsonWithTimeout(endpoints.ticker, 8000),
            fetchJsonWithTimeout(endpoints.klines, 9000)
          ]);

          var tickerData = responses[0];
          var klinesData = responses[1];

          var livePrice = Number(tickerData.lastPrice);
          var change24Value = Number(tickerData.priceChangePercent);

          var historyPoints = Array.isArray(klinesData)
            ? klinesData.map(function (candle) {
                return {
                  ts: Number(candle[0]),
                  price: Number(candle[4])
                };
              }).filter(function (point) { return Number.isFinite(point.ts) && Number.isFinite(point.price); })
            : [];

          var change7Value = computeWindowChange(historyPoints, 7);
          var change30Value = computeWindowChange(historyPoints, 30);

          priceValue.textContent = formatCurrency(livePrice);
          change24.textContent = formatPercent(change24Value);
          change7.textContent = formatPercent(change7Value);
          change30.textContent = formatPercent(change30Value);
          setSignedClass(change24, change24Value);
          setSignedClass(change7, change7Value);
          setSignedClass(change30, change30Value);
          lastSync.textContent = formatDateTime(Date.now());
          renderChart(historyPoints);
          priceStatus.textContent = 'Live market data.';
        } catch (error) {
          priceValue.textContent = '$67,000';
          change24.textContent = '--';
          change7.textContent = '--';
          change30.textContent = '--';
          setSignedClass(change24, null);
          setSignedClass(change7, null);
          setSignedClass(change30, null);
          lastSync.textContent = 'Snapshot mode';
          renderChart([]);
          priceStatus.textContent = 'Market feed unavailable. Showing cached snapshot.';
        }
      }

      async function loadNews() {
        renderNews(fallbackNews);

        try {
          var payload = await fetchJsonWithTimeout(endpoints.news, 9000);
          if (!payload || payload.status !== 'ok' || !Array.isArray(payload.items)) {
            throw new Error('Invalid news payload');
          }

          var items = payload.items.map(function (entry) {
            return {
              title: entry.title,
              url: entry.link,
              source: 'CoinDesk',
              publishedOn: Math.floor(new Date(entry.pubDate).getTime() / 1000)
            };
          });

          renderNews(items);
          newsStatus.textContent = 'Live headlines loaded.';
        } catch (error) {
          newsStatus.textContent = 'News feed unavailable. Showing fallback links.';
        }
      }

      async function loadBlocks() {
        renderBlocks(fallbackBlocks);

        try {
          var payload = await fetchJsonWithTimeout(endpoints.blocks, 9000);
          if (!Array.isArray(payload)) {
            throw new Error('Invalid block payload');
          }

          renderBlocks(payload);
          blockStatus.textContent = 'Latest blocks from mempool.space.';
        } catch (error) {
          blockStatus.textContent = 'Block feed unavailable. Showing recent snapshot.';
        }
      }

      loadMarketData();
      loadNews();
      loadBlocks();
    })();
  </script>
  <script src="ticker.js"></script>
</body>
</html>
